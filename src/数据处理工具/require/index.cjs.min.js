/* eslint-disable no-unused-vars */
/**
 * Require
 * @author Nomen
 * @description Require用于在客户端等环境模拟多模块环境，或用于在服务端控制用户模块
 */
class Require{static Executable=class e{static getExecutableString(e){return`;const {module,require} = args;(function(){(${"string"==typeof e?e:e.toString()})?.()})();return {module};`;}static createFunction(e,t){return Function(...e,t);}cache=null;exports=null;_module={exports:{}};constructor(t,r){this.module=e.getExecutableString(t),this.require=r;}getArgs({module:e,require:t}={require:this.require}){return{args:["args"],content:{module:e,require:t}};}getModule(){return this._module;}exec(){if(this.cache)return this.cache;let t=e.createFunction(this.getArgs().args,this.module)(this.getArgs({module:this.getModule(),require:this.require}).content);return this.cache=t.module?.exports||{},this.cache;}};constructor(e=[]){this.modules={},this.addModules(e);}getModules(){return this.modules;}addModules(e){return Object.keys(e).forEach(t=>{this.addModule(t,e[t]);}),this;}addModule(e,t){return this.modules[e]=Reflect.construct(Require.Executable,[t,this.require.bind(this)]),this;}require(e){if(this.getModules()[e])return this.getModules()[e].exec();throw Error(`Module ${e} not found`);}}